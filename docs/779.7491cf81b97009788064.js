(self.webpackChunksteam_ui=self.webpackChunksteam_ui||[]).push([[779],{3779:(t,e,n)=>{"use strict";n.r(e),n.d(e,{LibraryModule:()=>T});var o=n(3423),i=n(8583),r=n(7716),s=n(3738),c=n(4929),a=n(1095);class p{constructor(t,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),o=n.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",n.setAttribute("aria-hidden","true"),n.value=t,this._document.body.appendChild(n)}copy(){const t=this._textarea;let e=!1;try{if(t){const n=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),n&&n.focus()}}catch(n){}return e}destroy(){const t=this._textarea;t&&(t.parentNode&&t.parentNode.removeChild(t),this._textarea=void 0)}}let u=(()=>{class t{constructor(t){this._document=t}copy(t){const e=this.beginCopy(t),n=e.copy();return e.destroy(),n}beginCopy(t){return new p(t,this._document)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(i.K0))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(i.K0))},token:t,providedIn:"root"}),t})();const d=new r.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");let l=(()=>{class t{constructor(t,e,n){this._clipboard=t,this._ngZone=e,this.text="",this.attempts=1,this.copied=new r.vpe,this._pending=new Set,n&&null!=n.attempts&&(this.attempts=n.attempts)}copy(t=this.attempts){if(t>1){let e=t;const n=this._clipboard.beginCopy(this.text);this._pending.add(n);const o=()=>{const t=n.copy();t||!--e||this._destroyed?(this._currentTimeout=null,this._pending.delete(n),n.destroy(),this.copied.emit(t)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(o,1))};o()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(u),r.Y36(r.R0b),r.Y36(d,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),t})(),m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function h(t,e){if(1&t&&r._UZ(0,"app-game-card",6),2&t){const t=e.$implicit;r.oxw(2);const n=r.MAs(8);r.Q6J("templateRef",n)("game",t)}}function f(t,e){if(1&t&&(r.ynx(0),r.YNc(1,h,1,2,"app-game-card",5),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.currentUserGames)}}function g(t,e){1&t&&(r.TgZ(0,"h2"),r._uU(1,"You don't have games yet, go and buy some..."),r.qZA())}function y(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",7),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().download(e.title)}),r._uU(1,"Download"),r.qZA(),r.TgZ(2,"button",8),r._uU(3," Copy link "),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw();r.xp6(2),r.Q6J("cdkCopyToClipboard",n.getGameLink(t._id))}}let _=(()=>{class t{constructor(t,e){this.activatedRoute=t,this.docRef=e,this.currentUserGames=[]}ngOnInit(){this.currentUserGames=this.activatedRoute.snapshot.data.userGames}download(t){alert(t+" downloaded")}getGameLink(t){return this.docRef.location.href.replace(/([a-z\d]+)(\/*|)$/i,`games/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.gz),r.Y36(i.K0))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-library"]],decls:9,vars:2,consts:[[1,"games-main-card"],[1,"games-wrapper"],[4,"ngIf","ngIfElse"],["ifLibraryEmpty",""],["actions",""],[3,"templateRef","game",4,"ngFor","ngForOf"],[3,"templateRef","game"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"cdkCopyToClipboard"]],template:function(t,e){if(1&t&&(r.TgZ(0,"mat-card",0),r.TgZ(1,"mat-card-title"),r._uU(2," My Games "),r.qZA(),r.TgZ(3,"div",1),r.YNc(4,f,2,1,"ng-container",2),r.YNc(5,g,2,0,"ng-template",null,3,r.W1O),r.qZA(),r.qZA(),r.YNc(7,y,4,1,"ng-template",null,4,r.W1O)),2&t){const t=r.MAs(6);r.xp6(4),r.Q6J("ngIf",e.currentUserGames.length)("ngIfElse",t)}},directives:[s.a8,s.n5,i.O5,i.sg,c.k,a.lW,l],styles:[".games-wrapper[_ngcontent-%COMP%]{margin-top:3em;display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));grid-gap:1em}"],changeDetection:0}),t})();var C=n(8002),b=n(8049),w=n(6379);const v=[{path:"",pathMatch:"full",component:_,resolve:{userGames:(()=>{class t{constructor(t){this.userService=t}resolve(){return this.userService.fetchUserInfo$().pipe((0,C.U)(({games:t})=>t),(0,b.P)())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(w.K))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.Bz.forChild(v)],o.Bz]}),t})();var k=n(421);let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[x,k.m,m]]}),t})()}}]);