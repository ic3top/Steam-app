(self.webpackChunksteam_ui=self.webpackChunksteam_ui||[]).push([[589],{2589:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ProfileModule:()=>w});var n=i(3423),r=i(5319),o=i(7716),a=i(6379),s=i(263),c=i(3738),l=i(6627),u=i(8583),m=i(1095),f=i(8590);function g(e,t){1&e&&(o.TgZ(0,"a",2),o.TgZ(1,"mat-icon"),o._uU(2,"edit"),o.qZA(),o.qZA())}function p(e,t){1&e&&(o.TgZ(0,"a",3),o.TgZ(1,"mat-icon"),o._uU(2,"close"),o.qZA(),o.qZA())}let d=(()=>{class e{constructor(){this.isInfoOpened=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-toggle-button"]],inputs:{isInfoOpened:"isInfoOpened"},decls:3,vars:2,consts:[["mat-mini-fab","","routerLink","edit","matTooltip","Edit profile","matTooltipPosition","right","aria-label","edit profile",4,"ngIf","ngIfElse"],["cancel_button",""],["mat-mini-fab","","routerLink","edit","matTooltip","Edit profile","matTooltipPosition","right","aria-label","edit profile"],["mat-mini-fab","","routerLink","info","matTooltip","Cancel editing","matTooltipPosition","right","aria-label","cancel editing"]],template:function(e,t){if(1&e&&(o.YNc(0,g,3,0,"a",0),o.YNc(1,p,3,0,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",t.isInfoOpened)("ngIfElse",e)}},directives:[u.O5,m.zs,n.yS,f.gM,l.Hw],styles:[""],changeDetection:0}),e})();function h(e,t){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"mat-card-title"),o._uU(2),o.qZA(),o.TgZ(3,"mat-card-subtitle"),o._uU(4),o.qZA(),o.qZA()),2&e){const e=t.ngIf;o.xp6(2),o.Oqu(e.userName),o.xp6(2),o.Oqu(e.email)}}let Z=(()=>{class e{constructor(e,t,i){this.userService=e,this.authService=t,this.router=i,this.sub=new r.w}get currentUserInfo$(){return this.userService.getCurrentUserInfo$()}get isInfoOpened(){return this.router.url.includes("/info")}onDeleteClick(){this.sub=this.userService.deleteUser$().subscribe(()=>{this.authService.logout(),this.router.navigate(["/auth/login"])})}onLogoutClick(){this.authService.logout(),this.router.navigate(["/auth/login"])}ngOnDestroy(){this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.K),o.Y36(s.e),o.Y36(n.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-profile"]],decls:19,vars:4,consts:[[1,"profile-card"],["mat-card-avatar",""],[1,"profile-header-image"],[4,"ngIf"],[1,"edit-profile-button"],[3,"isInfoOpened"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"mat-card",0),o.TgZ(1,"mat-card-header"),o.TgZ(2,"div",1),o.TgZ(3,"mat-icon",2),o._uU(4,"face"),o.qZA(),o.qZA(),o.YNc(5,h,5,2,"div",3),o.ALo(6,"async"),o.TgZ(7,"div",4),o._UZ(8,"app-toggle-button",5),o.qZA(),o.qZA(),o.TgZ(9,"mat-card-content"),o._UZ(10,"router-outlet"),o.qZA(),o.TgZ(11,"mat-card-actions"),o.TgZ(12,"button",6),o.NdJ("click",function(){return t.onLogoutClick()}),o.TgZ(13,"mat-icon"),o._uU(14,"logout"),o.qZA(),o.TgZ(15,"span"),o._uU(16,"Logout"),o.qZA(),o.qZA(),o.TgZ(17,"button",7),o.NdJ("click",function(){return t.onDeleteClick()}),o._uU(18," Delete account "),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(5),o.Q6J("ngIf",o.lcZ(6,2,t.currentUserInfo$)),o.xp6(3),o.Q6J("isInfoOpened",t.isInfoOpened))},directives:[c.a8,c.dk,c.kc,l.Hw,u.O5,d,c.dn,n.lC,c.hq,m.lW,c.n5,c.$j],pipes:[u.Ov],styles:[".profile-card[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.profile-header-image[_ngcontent-%COMP%]{font-size:46px;text-align:center}.mat-card-actions[_ngcontent-%COMP%]{margin-top:5em;display:flex;justify-content:space-evenly;align-items:center}.edit-profile-button[_ngcontent-%COMP%]{margin-left:auto}"],changeDetection:0}),e})();var v=i(7746);function I(e,t){if(1&e&&(o.TgZ(0,"mat-list-item"),o.TgZ(1,"strong"),o._uU(2,"Age"),o.qZA(),o._uU(3),o.qZA()),2&e){const e=o.oxw().ngIf;o.xp6(3),o.hij(": ",e.age," ")}}function A(e,t){if(1&e&&(o.TgZ(0,"mat-list",1),o.YNc(1,I,4,1,"mat-list-item",2),o.TgZ(2,"mat-list-item"),o.TgZ(3,"strong"),o._uU(4,"Joined"),o.qZA(),o._uU(5),o.ALo(6,"date"),o.qZA(),o.TgZ(7,"mat-list-item"),o.TgZ(8,"strong"),o._uU(9,"Amount of owned games"),o.qZA(),o._uU(10),o.qZA(),o.TgZ(11,"mat-list-item"),o.TgZ(12,"strong"),o._uU(13,"Amount of friends"),o.qZA(),o._uU(14),o.qZA(),o.qZA()),2&e){const e=t.ngIf;o.xp6(1),o.Q6J("ngIf",e.age),o.xp6(4),o.hij(": ",o.xi3(6,4,e.createdAt,"MMM d, y")," "),o.xp6(5),o.hij(": ",e.games.length," "),o.xp6(4),o.hij(": ",e.friends.length," ")}}let T=(()=>{class e{constructor(e,t){this.activatedRoute=e,this.authService=t}ngOnInit(){this.profileInfo$=this.authService.getCurrentUserInfo$()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.gz),o.Y36(a.K))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-profile-info"]],decls:2,vars:3,consts:[["role","list",4,"ngIf"],["role","list"],[4,"ngIf"]],template:function(e,t){1&e&&(o.YNc(0,A,15,7,"mat-list",0),o.ALo(1,"async")),2&e&&o.Q6J("ngIf",o.lcZ(1,1,t.profileInfo$))},directives:[u.O5,v.i$,v.Tg],pipes:[u.Ov,u.uU],styles:[""],changeDetection:0}),e})();var q=i(3679),b=i(9765),_=i(6782),U=i(8295),y=i(9983);function O(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," Seems like you specified already registered email or name... "),o.qZA())}function k(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"form",1),o.NdJ("ngSubmit",function(){return o.CHM(e),o.oxw().onSubmit()}),o.YNc(1,O,2,0,"mat-error",2),o.TgZ(2,"mat-form-field",3),o._UZ(3,"input",4),o.TgZ(4,"mat-error"),o._uU(5," Please provide a valid email address "),o.qZA(),o.qZA(),o.TgZ(6,"mat-form-field",3),o._UZ(7,"input",5),o.TgZ(8,"mat-error"),o._uU(9," Please provide a valid name "),o.qZA(),o.qZA(),o.TgZ(10,"mat-form-field",3),o._UZ(11,"input",6),o.TgZ(12,"mat-error"),o._uU(13," Please provide a valid age "),o.qZA(),o.qZA(),o.TgZ(14,"button",7),o._uU(15,"Save"),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("formGroup",e.editProfileForm),o.xp6(1),o.Q6J("ngIf",e.formInvalid)}}const x=[{path:"",redirectTo:"info",pathMatch:"full"},{path:"",component:Z,children:[{path:"info",component:T},{path:"edit",component:(()=>{class e{constructor(e,t,i,n){this.fb=e,this.userService=t,this.router=i,this.cd=n,this.destroy$=new b.xQ,this.editProfileForm=this.fb.group({email:["email",q.kI.email],userName:["userName",[q.kI.minLength(2),q.kI.maxLength(24),q.kI.required]],age:["age",[q.kI.max(100),q.kI.min(6),q.kI.pattern("[0-9]{1,2}")]]}),this.formInvalid=!1}ngOnInit(){this.userService.getCurrentUserInfo$().pipe((0,_.R)(this.destroy$)).subscribe(e=>{this.editProfileForm.patchValue({email:e.email,userName:e.userName,age:e.age})})}onSubmit(){if(this.editProfileForm.valid){const{userName:e,email:t,age:i}=this.editProfileForm.value;this.userService.editUserInfo$(t,e,i).pipe((0,_.R)(this.destroy$)).subscribe({next:()=>{this.router.navigate(["/profile/info"])},error:()=>{this.formInvalid=!0,this.cd.markForCheck()}})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(q.qu),o.Y36(a.K),o.Y36(n.F0),o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-profile-edit"]],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"full-width-input"],["matInput","","type","email","placeholder","Email","formControlName","email","required",""],["matInput","","type","text","placeholder","Name","formControlName","userName","required",""],["matInput","","type","text","placeholder","Age","formControlName","age"],["mat-raised-button","","color","primary",1,"save-button"]],template:function(e,t){1&e&&o.YNc(0,k,16,2,"form",0),2&e&&o.Q6J("ngIf",t.editProfileForm)},directives:[u.O5,q._Y,q.JL,q.sg,U.KE,y.Nt,q.Fj,q.JJ,q.u,q.Q7,U.TO,m.lW],styles:[".mat-form-field[_ngcontent-%COMP%]{display:block;margin-top:1em}.save-button[_ngcontent-%COMP%]{width:100%;margin-top:1em}"],changeDetection:0}),e})()}]}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[n.Bz.forChild(x)],n.Bz]}),e})();var N=i(421);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[C,N.m]]}),e})()}}]);